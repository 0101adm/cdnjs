<<<<<<< HEAD
!function(e){if("function"==typeof bootstrap)bootstrap("backboneprojections",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeBackboneProjections=e}else"undefined"!=typeof window?window.BackboneProjections=e():global.BackboneProjections=e()}(function(){var define,ses,bootstrap,module,exports;return function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({"lib/index.js":[function(require,module,exports){var extend;extend=((typeof window!=="undefined"&&window!==null?window._:void 0)||require("underscore")).extend;module.exports=extend({},require("./capped"),require("./filtered"),require("./sorted"))},{"./capped":"lib/capped.js","./filtered":"lib/filtered.js","./sorted":"lib/sorted.js",underscore:"underscore"}],"lib/capped.js":[function(require,module,exports){var Collection,extend,inducedOrdering,toArray,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Collection=((typeof window!=="undefined"&&window!==null?window.Backbone:void 0)||require("backbone")).Collection;_ref=(typeof window!=="undefined"&&window!==null?window._:void 0)||require("underscore"),toArray=_ref.toArray,extend=_ref.extend;inducedOrdering=function(collection){var func;func=function(model){return collection.indexOf(model)};func.induced=true;return func};exports.Capped=function(_super){__extends(Capped,_super);function Capped(underlying,options){var _this=this;if(options==null){options={}}this.underlying=underlying;this.model=underlying.model;this.comparator=options.comparator||inducedOrdering(underlying);this.options=extend({cap:5},underlying.options,options);Capped.__super__.constructor.call(this,this._capped(this.underlying.models),options);this.listenTo(this.underlying,{reset:function(){return _this.reset(_this._capped(_this.underlying.models))},remove:function(model){var capped;if(_this.contains(model)){_this.remove(model);capped=_this._capped(_this.underlying.models);return _this.add(capped[_this.options.cap-1])}},add:function(model){if(_this.length<_this.options.cap){return _this.add(model)}else if(_this.comparator(model)<_this.comparator(_this.last())){_this.add(model);return _this.remove(_this.at(_this.options.cap))}},sort:function(){if(_this.comparator.induced){return _this.reset(_this._capped(_this.underlying.models))}}})}Capped.prototype._capped=function(models){var _this=this;models=toArray(models);models.sort(function(a,b){a=_this.comparator(a);b=_this.comparator(b);if(a>b){return 1}else if(a<b){return-1}else{return 0}});return models.slice(0,this.options.cap)};Capped.prototype.resize=function(cap){var capped,idx,model,_i,_ref1;if(this.options.cap>cap){this.options.cap=cap;_ref1=this.models;for(idx=_i=_ref1.length-1;_i>=0;idx=_i+=-1){model=_ref1[idx];if(idx<cap){break}this.remove(model)}}else if(this.options.cap<cap){this.options.cap=cap;capped=this._capped(this.underlying.models);this.add(capped.slice(this.length,this.options.cap))}return this.trigger("resize")};return Capped}(Collection);exports.CappedCollection=exports.Capped},{backbone:"backbone",underscore:"underscore"}],"lib/filtered.js":[function(require,module,exports){var Collection,extend,inducedOrdering,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Collection=((typeof window!=="undefined"&&window!==null?window.Backbone:void 0)||require("backbone")).Collection;extend=((typeof window!=="undefined"&&window!==null?window._:void 0)||require("underscore")).extend;inducedOrdering=function(collection){var func;func=function(model){return collection.indexOf(model)};func.induced=true;return func};exports.Filtered=function(_super){__extends(Filtered,_super);function Filtered(underlying,options){var _this=this;if(options==null){options={}}this.underlying=underlying;this.model=underlying.model;this.comparator=options.comparator||inducedOrdering(underlying);this.options=extend({},underlying.options,options);Filtered.__super__.constructor.call(this,this.underlying.models.filter(this.options.filter),options);this.listenTo(this.underlying,{reset:function(){return _this.reset(_this.underlying.models.filter(_this.options.filter))},remove:function(model){if(_this.contains(model)){return _this.remove(model)}},add:function(model){if(_this.options.filter(model)){return _this.add(model)}},change:function(model){return _this.decideOn(model)},sort:function(){if(_this.comparator.induced){return _this.sort()}}})}Filtered.prototype.update=function(){var model,_i,_len,_ref,_results;_ref=this.underlying.models;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){model=_ref[_i];_results.push(this.decideOn(model))}return _results};Filtered.prototype.decideOn=function(model){if(this.contains(model)){if(!this.options.filter(model)){return this.remove(model)}}else{if(this.options.filter(model)){return this.add(model)}}};return Filtered}(Collection);exports.FilteredCollection=exports.Filtered},{backbone:"backbone",underscore:"underscore"}],"lib/sorted.js":[function(require,module,exports){var Collection,extend,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Collection=((typeof window!=="undefined"&&window!==null?window.Backbone:void 0)||require("backbone")).Collection;extend=((typeof window!=="undefined"&&window!==null?window._:void 0)||require("underscore")).extend;exports.Sorted=function(_super){__extends(Sorted,_super);function Sorted(underlying,options){var _this=this;if(options==null){options={}}if(!options.comparator){throw new Error("provide a comparator")}this.underlying=underlying;this.model=underlying.model;this.comparator=options.comparator;this.options=extend({},underlying.options,options);Sorted.__super__.constructor.call(this,this.underlying.models,options);this.listenTo(this.underlying,{reset:function(){return _this.reset(_this.underlying.models)},remove:function(model){return _this.remove(model)},add:function(model){return _this.add(model)}})}return Sorted}(Collection);exports.Reversed=function(_super){__extends(Reversed,_super);function Reversed(underlying,options){if(options==null){options={}}options.comparator=function(model){return-underlying.indexOf(model)};Reversed.__super__.constructor.call(this,underlying,options);this.listenTo(this.underlying,{sort:this.sort})}return Reversed}(exports.Sorted);exports.SortedCollection=exports.Sorted;exports.ReversedCollection=exports.Reversed},{backbone:"backbone",underscore:"underscore"}]},{},["lib/index.js"])("lib/index.js")});
=======
!function(a){if("function"==typeof bootstrap)bootstrap("backboneprojections",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeBackboneProjections=a}else"undefined"!=typeof window?window.BackboneProjections=a():global.BackboneProjections=a()}(function(){return function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({"lib/index.js":[function(a,b){var d;d=(("undefined"!=typeof window&&null!==window?window._:void 0)||a("underscore")).extend,b.exports=d({},a("./capped"),a("./filtered"),a("./sorted"))},{"./capped":"lib/capped.js","./filtered":"lib/filtered.js","./sorted":"lib/sorted.js",underscore:"underscore"}],"lib/capped.js":[function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=(("undefined"!=typeof window&&null!==window?window.Backbone:void 0)||a("backbone")).Collection,h=("undefined"!=typeof window&&null!==window?window._:void 0)||a("underscore"),g=h.toArray,e=h.extend,f=function(a){var b;return b=function(b){return a.indexOf(b)},b.induced=!0,b},c.Capped=function(a){function b(a,c){var d=this;null==c&&(c={}),this.underlying=a,this.model=a.model,this.comparator=c.comparator||f(a),this.options=e({cap:5},a.options,c),b.__super__.constructor.call(this,this._capped(this.underlying.models),c),this.listenTo(this.underlying,{reset:function(){return d.reset(d._capped(d.underlying.models))},remove:function(a){var b;return d.contains(a)?(d.remove(a),b=d._capped(d.underlying.models),d.add(b[d.options.cap-1])):void 0},add:function(a){return d.length<d.options.cap?d.add(a):d.comparator(a)<d.comparator(d.last())?(d.add(a),d.remove(d.at(d.options.cap))):void 0},sort:function(){return d.comparator.induced?d.reset(d._capped(d.underlying.models)):void 0}})}return j(b,a),b.prototype._capped=function(a){var b=this;return a=g(a),a.sort(function(a,c){return a=b.comparator(a),c=b.comparator(c),a>c?1:c>a?-1:0}),a.slice(0,this.options.cap)},b.prototype.resize=function(a){var b,c,d,e,f;if(this.options.cap>a)for(this.options.cap=a,f=this.models,c=e=f.length-1;e>=0&&(d=f[c],!(a>c));c=e+=-1)this.remove(d);else this.options.cap<a&&(this.options.cap=a,b=this._capped(this.underlying.models),this.add(b.slice(this.length,this.options.cap)));return this.trigger("resize")},b}(d),c.CappedCollection=c.Capped},{backbone:"backbone",underscore:"underscore"}],"lib/filtered.js":[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=(("undefined"!=typeof window&&null!==window?window.Backbone:void 0)||a("backbone")).Collection,e=(("undefined"!=typeof window&&null!==window?window._:void 0)||a("underscore")).extend,f=function(a){var b;return b=function(b){return a.indexOf(b)},b.induced=!0,b},c.Filtered=function(a){function b(a,c){var d=this;null==c&&(c={}),this.underlying=a,this.model=a.model,this.comparator=c.comparator||f(a),this.options=e({},a.options,c),b.__super__.constructor.call(this,this.underlying.models.filter(this.options.filter),c),this.listenTo(this.underlying,{reset:function(){return d.reset(d.underlying.models.filter(d.options.filter))},remove:function(a){return d.contains(a)?d.remove(a):void 0},add:function(a){return d.options.filter(a)?d.add(a):void 0},change:function(a){return d.decideOn(a)},sort:function(){return d.comparator.induced?d.sort():void 0}})}return h(b,a),b.prototype.update=function(){var a,b,c,d,e;for(d=this.underlying.models,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.decideOn(a));return e},b.prototype.decideOn=function(a){if(this.contains(a)){if(!this.options.filter(a))return this.remove(a)}else if(this.options.filter(a))return this.add(a)},b}(d),c.FilteredCollection=c.Filtered},{backbone:"backbone",underscore:"underscore"}],"lib/sorted.js":[function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=(("undefined"!=typeof window&&null!==window?window.Backbone:void 0)||a("backbone")).Collection,e=(("undefined"!=typeof window&&null!==window?window._:void 0)||a("underscore")).extend,c.Sorted=function(a){function b(a,c){var d=this;if(null==c&&(c={}),!c.comparator)throw new Error("provide a comparator");this.underlying=a,this.model=a.model,this.comparator=c.comparator,this.options=e({},a.options,c),b.__super__.constructor.call(this,this.underlying.models,c),this.listenTo(this.underlying,{reset:function(){return d.reset(d.underlying.models)},remove:function(a){return d.remove(a)},add:function(a){return d.add(a)}})}return g(b,a),b}(d),c.Reversed=function(a){function b(a,c){null==c&&(c={}),c.comparator=function(b){return-a.indexOf(b)},b.__super__.constructor.call(this,a,c),this.listenTo(this.underlying,{sort:this.sort})}return g(b,a),b}(c.Sorted),c.SortedCollection=c.Sorted,c.ReversedCollection=c.Reversed},{backbone:"backbone",underscore:"underscore"}]},{},["lib/index.js"])("lib/index.js")});
>>>>>>> 1ccf0a464e240ca33294367767ee8b725bbcf0db
