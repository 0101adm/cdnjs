define(function(c,b,d){var f=c("ace/line_widgets").LineWidgets;var g=c("ace/lib/dom");var e=c("ace/range").Range;function h(o,l,i){var m=0;var k=o.length-1;while(m<=k){var j=(m+k)>>1;var n=i(l,o[j]);if(n>0){m=j+1}else{if(n<0){k=j-1}else{return j}}}return -(m+1)}function a(o,p,l){var n=o.getAnnotations().sort(e.comparePoints);if(!n.length){return}var m=h(n,{row:p,column:-1},e.comparePoints);if(m<0){m=-m-1}if(m>=n.length-1){m=l>0?0:n.length-1}else{if(m===0&&l<0){m=n.length-1}}var k=n[m];if(!k||!l){return}if(k.row===p){do{k=n[m+=l]}while(k&&k.row===p);if(!k){return n.slice()}}var j=[];p=k.row;do{j[l<0?"unshift":"push"](k);k=n[m+=l]}while(k&&k.row==p);return j.length&&j}b.showErrorMarker=function(p,k){var q=p.session;if(!q.widgetManager){q.widgetManager=new f(q);q.widgetManager.attach(p)}var r=p.getCursorPosition();var v=r.row;var m=q.lineWidgets&&q.lineWidgets[v];if(m){m.destroy()}else{v-=k}var o=a(q,v,k);var u;if(o){var l=o[0];if(l.pos&&l.column==null){r.column=l.pos.sc}r.row=l.row;u=p.renderer.$gutterLayer.$annotations[r.row]}else{if(m){return}else{u={text:["Looks good!"],className:"ace_ok"}}}p.session.unfold(r.row);p.selection.moveCursorToPosition(r);p.selection.clearSelection();var t={row:r.row,fixedWidth:true,coverGutter:true,el:g.createElement("div")};var i=t.el.appendChild(g.createElement("div"));var s=t.el.appendChild(g.createElement("div"));s.className="error_widget_arrow "+u.className;var j=p.renderer.$cursorLayer.getPixelPosition(r).left;s.style.left=j+p.renderer.gutterWidth-5+"px";t.el.className="error_widget_wrapper";i.className="error_widget "+u.className;i.innerHTML=u.text.join("<br>");var n={handleKeyboard:function(x,y,w){if(y===0&&w==="esc"){t.destroy();return true}}};t.destroy=function(){if(p.$mouseHandler.isMousePressed){return}p.keyBinding.removeKeyboardHandler(n);q.widgetManager.removeLineWidget(t);p.off("changeSelection",t.destroy);p.off("changeSession",t.destroy);p.off("mouseup",t.destroy);p.off("change",t.destroy)};p.keyBinding.addKeyboardHandler(n);p.on("changeSelection",t.destroy);p.on("changeSession",t.destroy);p.on("mouseup",t.destroy);p.on("change",t.destroy);p.session.widgetManager.addLineWidget(t);t.el.onmousedown=p.focus.bind(p)};g.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")});