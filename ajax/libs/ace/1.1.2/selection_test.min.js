if(typeof process!=="undefined"){require("amd-loader")}define(function(c,b,e){var d=c("./edit_session").EditSession;var a=c("./test/assertions");e.exports={createSession:function(g,h){var f=new Array(h+1).join("a");var i=new Array(g).join(f+"\n")+f;return new d(i)},"test: move cursor to end of file should place the cursor on last row and column":function(){var g=this.createSession(200,10);var f=g.getSelection();f.moveCursorFileEnd();a.position(f.getCursor(),199,10)},"test: moveCursor to start of file should place the cursor on the first row and column":function(){var g=this.createSession(200,10);var f=g.getSelection();f.moveCursorFileStart();a.position(f.getCursor(),0,0)},"test: move selection lead to end of file":function(){var h=this.createSession(200,10);var g=h.getSelection();g.moveCursorTo(100,5);g.selectFileEnd();var f=g.getRange();a.position(f.start,100,5);a.position(f.end,199,10)},"test: move selection lead to start of file":function(){var h=this.createSession(200,10);var g=h.getSelection();g.moveCursorTo(100,5);g.selectFileStart();var f=g.getRange();a.position(f.start,0,0);a.position(f.end,100,5)},"test: move cursor word right":function(){var g=new d(["ab"," Juhu Kinners (abc, 12)"," cde"].join("\n"));var f=g.getSelection();g.$selectLongWords=true;f.moveCursorDown();a.position(f.getCursor(),1,0);f.moveCursorWordRight();a.position(f.getCursor(),1,5);f.moveCursorWordRight();a.position(f.getCursor(),1,13);f.moveCursorWordRight();a.position(f.getCursor(),1,18);f.moveCursorWordRight();a.position(f.getCursor(),1,22);f.moveCursorWordRight();a.position(f.getCursor(),2,4);f.moveCursorWordRight();a.position(f.getCursor(),2,4)},"test: select word right if cursor in word":function(){var g=new d("Juhu Kinners");var f=g.getSelection();f.moveCursorTo(0,2);f.moveCursorWordRight();a.position(f.getCursor(),0,4)},"test: moveCursor word left":function(){var g=new d(["ab"," Juhu Kinners (abc, 12)"," cde"].join("\n"));var f=g.getSelection();g.$selectLongWords=true;f.moveCursorDown();f.moveCursorLineEnd();a.position(f.getCursor(),1,23);f.moveCursorWordLeft();a.position(f.getCursor(),1,20);f.moveCursorWordLeft();a.position(f.getCursor(),1,15);f.moveCursorWordLeft();a.position(f.getCursor(),1,6);f.moveCursorWordLeft();a.position(f.getCursor(),1,1);f.moveCursorWordLeft();a.position(f.getCursor(),0,0);f.moveCursorWordLeft();a.position(f.getCursor(),0,0)},"test: moveCursor word left with umlauts":function(){var g=new d(" Fuß Füße");g.$selectLongWords=true;var f=g.getSelection();f.moveCursorTo(0,9);f.moveCursorWordLeft();a.position(f.getCursor(),0,5);f.moveCursorWordLeft();a.position(f.getCursor(),0,1)},"test: select word left if cursor in word":function(){var g=new d("Juhu Kinners");var f=g.getSelection();g.$selectLongWords=true;f.moveCursorTo(0,8);f.moveCursorWordLeft();a.position(f.getCursor(),0,5)},"test: select word right and select":function(){var h=new d("Juhu Kinners");var g=h.getSelection();g.moveCursorTo(0,0);g.selectWordRight();var f=g.getRange();a.position(f.start,0,0);a.position(f.end,0,4)},"test: select word left and select":function(){var h=new d("Juhu Kinners");var g=h.getSelection();g.moveCursorTo(0,3);g.selectWordLeft();var f=g.getRange();a.position(f.start,0,0);a.position(f.end,0,3)},"test: select word with cursor in word should select the word":function(){var h=new d("Juhu Kinners 123");var g=h.getSelection();g.moveCursorTo(0,8);g.selectWord();var f=g.getRange();a.position(f.start,0,5);a.position(f.end,0,12)},"test: select word with cursor in word including right whitespace should select the word":function(){var h=new d("Juhu Kinners      123");var g=h.getSelection();g.moveCursorTo(0,8);g.selectAWord();var f=g.getRange();a.position(f.start,0,5);a.position(f.end,0,18)},"test: select word with cursor betwen white space and word should select the word":function(){var h=new d("Juhu Kinners");var g=h.getSelection();h.$selectLongWords=true;g.moveCursorTo(0,4);g.selectWord();var f=g.getRange();a.position(f.start,0,0);a.position(f.end,0,4);g.moveCursorTo(0,5);g.selectWord();var f=g.getRange();a.position(f.start,0,5);a.position(f.end,0,12)},"test: select word with cursor in white space should select white space":function(){var h=new d("Juhu  Kinners");var g=h.getSelection();h.$selectLongWords=true;g.moveCursorTo(0,5);g.selectWord();var f=g.getRange();a.position(f.start,0,4);a.position(f.end,0,6)},"test: moving cursor should fire a 'changeCursor' event":function(){var h=new d("Juhu  Kinners");var f=h.getSelection();h.$selectLongWords=true;f.moveCursorTo(0,5);var g=false;f.addEventListener("changeCursor",function(){g=true});f.moveCursorTo(0,6);a.ok(g)},"test: calling setCursor with the same position should not fire an event":function(){var h=new d("Juhu  Kinners");var f=h.getSelection();h.$selectLongWords=true;f.moveCursorTo(0,5);var g=false;f.addEventListener("changeCursor",function(){g=true});f.moveCursorTo(0,5);a.notOk(g)},"test: moveWordright should move past || and [":function(){var g=new d("||foo[");var f=g.getSelection();g.$selectLongWords=true;f.moveCursorWordRight();a.position(f.getCursor(),0,5);f.moveCursorWordRight();a.position(f.getCursor(),0,6)},"test: moveWordLeft should move past || and [":function(){var g=new d("||foo[");var f=g.getSelection();g.$selectLongWords=true;f.moveCursorTo(0,6);f.moveCursorWordLeft();a.position(f.getCursor(),0,2);f.moveCursorWordLeft();a.position(f.getCursor(),0,0)},"test: move cursor to line start should move cursor to end of the indentation first":function(){var g=new d("12\n    Juhu\n12");var f=g.getSelection();f.moveCursorTo(1,6);f.moveCursorLineStart();a.position(f.getCursor(),1,4)},"test: move cursor to line start when the cursor is at the end of the indentation should move cursor to column 0":function(){var g=new d("12\n    Juhu\n12");var f=g.getSelection();f.moveCursorTo(1,4);f.moveCursorLineStart();a.position(f.getCursor(),1,0)},"test: move cursor to line start when the cursor is at column 0 should move cursor to the end of the indentation":function(){var g=new d("12\n    Juhu\n12");var f=g.getSelection();f.moveCursorTo(1,0);f.moveCursorLineStart();a.position(f.getCursor(),1,4)},"test: move cursor to line start when the cursor is before the initial indentation should move cursor to the end of the indentation":function(){var g=new d("12\n    Juhu\n12");var f=g.getSelection();f.moveCursorTo(1,2);f.moveCursorLineStart();a.position(f.getCursor(),1,4)},"test go line up when in the middle of the first line should go to document start":function(){var g=new d("juhu kinners");var f=g.getSelection();f.moveCursorTo(0,4);f.moveCursorUp();a.position(f.getCursor(),0,0)},"test: (wrap) go line up when in the middle of the first line should go to document start":function(){var g=new d("juhu kinners");g.setWrapLimitRange(5,5);g.adjustWrapLimit(80);var f=g.getSelection();f.moveCursorTo(0,4);f.moveCursorUp();a.position(f.getCursor(),0,0)},"test go line down when in the middle of the last line should go to document end":function(){var g=new d("juhu kinners");var f=g.getSelection();f.moveCursorTo(0,4);f.moveCursorDown();a.position(f.getCursor(),0,12)},"test (wrap) go line down when in the middle of the last line should go to document end":function(){var g=new d("juhu kinners");g.setWrapLimitRange(8,8);g.adjustWrapLimit(80);var f=g.getSelection();f.moveCursorTo(0,10);f.moveCursorDown();a.position(f.getCursor(),0,12)},"test go line up twice and then once down when in the second should go back to the previous column":function(){var g=new d("juhu\nkinners");var f=g.getSelection();f.moveCursorTo(1,4);f.moveCursorUp();f.moveCursorUp();f.moveCursorDown();a.position(f.getCursor(),1,4)},"test (keyboard navigation) when curLine is not EOL and targetLine is all whitespace new column should be current column":function(){var g=new d("function (a) {\n    \n}");var f=g.getSelection();f.moveCursorTo(2,0);f.moveCursorUp();a.position(f.getCursor(),1,0)},"test (keyboard navigation) when curLine is EOL and targetLine is shorter than current column, new column should be targetLine's EOL":function(){var g=new d("function (a) {\n    \n}");var f=g.getSelection();f.moveCursorTo(0,14);f.moveCursorDown();a.position(f.getCursor(),1,4)},"test fromJSON/toJSON":function(){var h=new d("function (a) {\n    \n}");var f=h.getSelection();f.moveCursorTo(0,14);f.moveCursorDown();a.position(f.getCursor(),1,4);var g=f.toJSON();g=JSON.parse(JSON.stringify(g));f.moveCursorDown();a.position(f.getCursor(),2,1);a.ok(!f.isEqual(g));f.fromJSON(g);a.position(f.getCursor(),1,4);a.ok(f.isEqual(g))}}});if(typeof module!=="undefined"&&module===require.main){require("asyncjs").test.testcase(module.exports).exec()};