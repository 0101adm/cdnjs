define(function(b,a,c){var e=b("../lib/oop");var f=b("../worker/mirror").Mirror;var g=b("./json/json_parse");var d=a.JsonWorker=function(h){f.call(this,h);this.setTimeout(200)};e.inherits(d,f);(function(){this.onUpdate=function(){var i=this.doc.getValue();try{var h=g(i)}catch(j){var k=this.doc.indexToPosition(j.at-1);this.sender.emit("error",{row:k.row,column:k.column,text:j.message,type:"error"});return}this.sender.emit("ok")}}).call(d.prototype)});