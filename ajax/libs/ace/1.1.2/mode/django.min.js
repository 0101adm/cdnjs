define(function(c,f,b){var h=c("../lib/oop");var j=c("./html").Mode;var i=c("../tokenizer").Tokenizer;var e=c("./html_highlight_rules").HtmlHighlightRules;var a=c("./text_highlight_rules").TextHighlightRules;var g=function(){this.$rules={start:[{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"},{token:"constant",regex:"[0-9]+"},{token:"variable",regex:"[-_a-zA-Z0-9:]+"}],comment:[{token:"comment.block",merge:true,regex:".+?"}],tag:[{token:"entity.name.function",regex:"[a-zA-Z][_a-zA-Z0-9]*",next:"start"}]}};h.inherits(g,a);var d=function(){this.$rules=new e().getRules();for(var l in this.$rules){this.$rules[l].unshift({token:"comment.line",regex:"\\{#.*?#\\}"},{token:"comment.block",regex:"\\{\\%\\s*comment\\s*\\%\\}",merge:true,next:"django-comment"},{token:"constant.language",regex:"\\{\\{",next:"django-start"},{token:"constant.language",regex:"\\{\\%",next:"django-tag"});this.embedRules(g,"django-",[{token:"comment.block",regex:"\\{\\%\\s*endcomment\\s*\\%\\}",merge:true,next:"start"},{token:"constant.language",regex:"\\%\\}",next:"start"},{token:"constant.language",regex:"\\}\\}",next:"start"}])}};h.inherits(d,e);var k=function(){j.call(this);this.HighlightRules=d};h.inherits(k,j);f.Mode=k});