define(function(c,b,d){var e=c("../lib/oop");var f=c("./html_highlight_rules").HtmlHighlightRules;var h=c("./xml_util");function g(j,i){i.splice(0,3);return i.shift()||"start"}var a=function(){f.call(this);var j={regex:"(?={{)",push:"handlebars"};for(var i in this.$rules){this.$rules[i].unshift(j)}this.$rules.handlebars=[{token:"comment.start",regex:"{{!--",push:[{token:"comment.end",regex:"--}}",next:g},{defaultToken:"comment"}]},{token:"comment.start",regex:"{{!",push:[{token:"comment.end",regex:"}}",next:g},{defaultToken:"comment"}]},{token:"storage.type.start",regex:"{{[#\\^/&]?",push:[{token:"storage.type.end",regex:"}}",next:g},{token:"variable.parameter",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*"}]},{token:"support.function",regex:"{{{",push:[{token:"support.function",regex:"}}}",next:g},{token:"variable.parameter",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*"}]}];this.normalizeRules()};e.inherits(a,f);b.HandlebarsHighlightRules=a});