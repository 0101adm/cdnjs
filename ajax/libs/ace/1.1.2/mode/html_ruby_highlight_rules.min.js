define(function(b,a,c){var e=b("../lib/oop");var f=b("./html_highlight_rules").HtmlHighlightRules;var g=b("./ruby_highlight_rules").RubyHighlightRules;var d=function(){f.call(this);var j=[{regex:"<%%|%%>",token:"constant.language.escape"},{token:"comment.start.erb",regex:"<%#",push:[{token:"comment.end.erb",regex:"%>",next:"pop",defaultToken:"comment"}]},{token:"support.ruby_tag",regex:"<%+(?!>)[-=]?",push:"ruby-start"}];var h=[{token:"support.ruby_tag",regex:"%>",next:"pop"},{token:"comment",regex:"#(?:[^%]|%[^>])*"}];for(var i in this.$rules){this.$rules[i].unshift.apply(this.$rules[i],j)}this.embedRules(g,"ruby-",h,["start"]);this.normalizeRules()};e.inherits(d,f);a.HtmlRubyHighlightRules=d});