define(function(d,e,b){var f=d("../../lib/oop");var a=d("../behaviour/xml").XmlBehaviour;var j=d("./cstyle").CstyleBehaviour;var i=d("../../token_iterator").TokenIterator;var h=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function c(l,m){var k=l.type.split(".");return m.split(".").every(function(n){return(k.indexOf(n)!==-1)});return c}var g=function(){this.inherit(a);this.add("autoclosing","insertion",function(k,m,r,s,t){if(t==">"){var p=r.getCursorPosition();var o=new i(s,p.row,p.column);var l=o.getCurrentToken();if(l&&c(l,"string")&&o.getCurrentTokenColumn()+l.value.length>p.column){return}var q=false;if(!l||!c(l,"meta.tag")&&!(c(l,"text")&&l.value.match("/"))){do{l=o.stepBackward()}while(l&&(c(l,"string")||c(l,"keyword.operator")||c(l,"entity.attribute-name")||c(l,"text")))}else{q=true}if(!l||!c(l,"meta.tag.name")||o.stepBackward().value.match("/")){return}var n=l.value;if(q){var n=n.substring(0,p.column-l.start)}if(h.indexOf(n)!==-1){return}return{text:"></"+n+">",selection:[1,1]}}})};f.inherits(g,a);e.HtmlBehaviour=g});