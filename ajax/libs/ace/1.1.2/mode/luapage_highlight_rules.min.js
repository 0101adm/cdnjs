define(function(b,a,d){var f=b("../lib/oop");var g=b("./html_highlight_rules").HtmlHighlightRules;var c=b("./lua_highlight_rules").LuaHighlightRules;var e=function(){g.call(this);var j=[{token:"keyword",regex:"<\\%\\=?",push:"lua-start"},{token:"keyword",regex:"<\\?lua\\=?",push:"lua-start"}];var h=[{token:"keyword",regex:"\\%>",next:"pop"},{token:"keyword",regex:"\\?>",next:"pop"}];this.embedRules(c,"lua-",h,["start"]);for(var i in this.$rules){this.$rules[i].unshift.apply(this.$rules[i],j)}this.normalizeRules()};f.inherits(e,g);a.LuaPageHighlightRules=e});