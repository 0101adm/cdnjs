define(function(d,f,b){var g=d("../lib/oop");var e=d("./text").Mode;var j=d("../tokenizer").Tokenizer;var h=d("./logiql_highlight_rules").LogiQLHighlightRules;var a=d("./folding/coffee").FoldMode;var i=d("../token_iterator").TokenIterator;var c=d("../range").Range;var m=d("./behaviour/cstyle").CstyleBehaviour;var l=d("./matching_brace_outdent").MatchingBraceOutdent;var k=function(){this.HighlightRules=h;this.foldingRules=new a();this.$outdent=new l();this.$behaviour=new m()};g.inherits(k,e);(function(){this.lineCommentStart="//";this.blockComment={start:"/*",end:"*/"};this.getNextLineIndent=function(t,p,r){var o=this.$getIndent(p);var s=this.getTokenizer().getLineTokens(p,t);var u=s.tokens;var n=s.state;if(/comment|string/.test(n)){return o}if(u.length&&u[u.length-1].type=="comment.single"){return o}var q=p.match();if(/(-->|<--|<-|->|{)\s*$/.test(p)){o+=r}return o};this.checkOutdent=function(p,n,o){if(this.$outdent.checkOutdent(n,o)){return true}if(o!=="\n"&&o!=="\r\n"){return false}if(!/^\s+/.test(n)){return false}return true};this.autoOutdent=function(n,s,u){if(this.$outdent.autoOutdent(s,u)){return}var t=s.getLine(u);var q=t.match(/^\s+/);var p=t.lastIndexOf(".")+1;if(!q||!u||!p){return 0}var v=s.getLine(u+1);var r=this.getMatching(s,{row:u,column:p});if(!r||r.start.row==u){return 0}p=q[0].length;var o=this.$getIndent(s.getLine(r.start.row));s.replace(new c(u+1,0,u+1,p),o)};this.getMatching=function(s,v,o){if(v==undefined){v=s.selection.lead}if(typeof v=="object"){o=v.column;v=v.row}var q=s.getTokenAt(v,o);var t="keyword.start",r="keyword.end";var u;if(!q){return}if(q.type==t){var p=new i(s,v,o);p.step=p.stepForward}else{if(q.type==r){var p=new i(s,v,o);p.step=p.stepBackward}else{return}}while(u=p.step()){if(u.type==t||u.type==r){break}}if(!u||u.type==q.type){return}var n=p.getCurrentTokenColumn();var v=p.getCurrentTokenRow();return new c(v,n,v,n+u.value.length)};this.$id="ace/mode/logiql"}).call(k.prototype);f.Mode=k});