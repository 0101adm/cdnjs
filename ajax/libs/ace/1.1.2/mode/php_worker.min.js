define(function(b,a,c){var d=b("../lib/oop");var f=b("../worker/mirror").Mirror;var e=b("./php/php").PHP;var g=a.PhpWorker=function(h){f.call(this,h);this.setTimeout(500)};d.inherits(g,f);(function(){this.setOptions=function(h){this.inlinePhp=h&&h.inline};this.onUpdate=function(){var h=this.doc.getValue();var k=[];if(this.inlinePhp){h="<?"+h+"?>"}var j=e.Lexer(h,{short_open_tag:1});try{new e.Parser(j)}catch(i){k.push({row:i.line-1,column:null,text:i.message.charAt(0).toUpperCase()+i.message.substring(1),type:"error"})}if(k.length){this.sender.emit("error",k)}else{this.sender.emit("ok")}}}).call(g.prototype)});