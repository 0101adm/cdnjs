if(typeof process!=="undefined"){require("amd-loader")}define(function(e,g,c){var a=e("./edit_session").EditSession;var j=e("./editor").Editor;var i=e("./test/mockrenderer").MockRenderer;var d=e("./range").Range;var b=e("./test/assertions");var k=e("./multi_select").MultiSelect;var h;var f=function(n,o,m){do{h.commands.exec(n,h,m)}while(o-->1)};var l=function(m){b.equal(h.selection.getAllRanges()+"",m+"")};c.exports={name:"ACE multi_select.js","test: multiselect editing":function(){var n=new a(["w1.w2","    wtt.w","    wtt.w"]);h=new j(new i(),n);k(h);h.navigateFileEnd();f("selectMoreBefore",3);b.ok(h.inMultiSelectMode);b.equal(h.selection.getAllRanges().length,4);var o=h.session.getDocument().getNewLineCharacter();var m="wwww".split("").join(o);b.equal(h.getCopyText(),m);f("insertstring",1,"a");f("backspace",2);b.equal(h.session.getValue(),"w1.w2\ntt\ntt");b.equal(h.selection.getAllRanges().length,4);f("selectall");b.ok(!h.inMultiSelectMode)},"test: multiselect navigation":function(){var m=new a(["w1.w2","    wtt.w","    wtt.we"]);h=new j(new i(),m);k(h);h.selectMoreLines(1);l("Range: [0/0] -> [0/0],Range: [1/0] -> [1/0]");b.ok(h.inMultiSelectMode);f("golinedown");f("gotolineend");l("Range: [1/9] -> [1/9],Range: [2/10] -> [2/10]");f("selectwordleft");l("Range: [1/8] -> [1/9],Range: [2/8] -> [2/10]");f("golinedown",2);b.ok(!h.inMultiSelectMode)},"test: multiselect session change":function(){var n=new a(["w1.w2","    wtt.w","    wtt.w"]);h=new j(new i(),n);k(h);h.selectMoreLines(1);l("Range: [0/0] -> [0/0],Range: [1/0] -> [1/0]");b.ok(h.inMultiSelectMode);var m=new a(["w1"]);h.setSession(m);b.ok(!h.inMultiSelectMode);h.setSession(n);b.ok(h.inMultiSelectMode)},"test: multiselect addRange":function(){var p=new a(["w1.w2","    wtt.w","    wtt.w"]);h=new j(new i(),p);k(h);var o=h.selection;var n=new d(0,2,0,4);h.selection.fromOrientedRange(n);var m=new d(0,3,0,4);o.addRange(m);b.ok(!h.inMultiSelectMode);b.ok(m.isEqual(h.selection.getRange()));var r=new d(0,1,0,1);o.addRange(r);b.ok(h.inMultiSelectMode);l([r,m]);var q=new d(0,0,4,0);o.addRange(q);b.ok(!h.inMultiSelectMode)},"test: onPaste in command with multiselect":function(){var p=new a(["l1","l2"]);h=new j(new i(),p);k(h);h.commands.addCommand({name:"insertfoo",exec:function(q){q.onPaste("foo")},multiSelectAction:"forEach"});var o=h.selection;var n=new d(0,2,0,2);var m=new d(1,2,1,2);o.fromOrientedRange(n);o.addRange(m);h.execCommand("insertfoo");b.equal("l1foo\nl2foo",h.getValue())},"test multiselect fromJSON/toJSON":function(){var q=new a(["l1","l2"]);h=new j(new i(),q);k(h);var o=h.selection;var p=o.toJSON();var n=new d(0,2,0,2);var m=new d(1,2,1,2);o.fromOrientedRange(n);o.addRange(m);var r=o.toJSON();o.fromJSON(p);b.ok(!o.isEqual(r));b.ok(o.isEqual(p));o.fromJSON(r);b.ok(!o.isEqual(p));b.ok(o.isEqual(r))}}});if(typeof module!=="undefined"&&module===require.main){require("asyncjs").test.testcase(module.exports).exec()};