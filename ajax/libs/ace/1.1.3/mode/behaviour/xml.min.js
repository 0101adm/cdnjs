define(function(c,f,b){var g=c("../../lib/oop");var e=c("../behaviour").Behaviour;var i=c("./cstyle").CstyleBehaviour;var h=c("../../token_iterator").TokenIterator;function d(k,l){var j=k.type.split(".");return l.split(".").every(function(m){return(j.indexOf(m)!==-1)});return d}var a=function(){this.inherit(i,["string_dquotes"]);this.add("autoclosing","insertion",function(j,l,p,q,r){if(r==">"){var n=p.getCursorPosition();var m=new h(q,n.row,n.column);var k=m.getCurrentToken();if(k&&d(k,"string")&&m.getCurrentTokenColumn()+k.value.length>n.column){return}var o=false;if(!k||!d(k,"meta.tag")&&!(d(k,"text")&&k.value.match("/"))){do{k=m.stepBackward()}while(k&&(d(k,"string")||d(k,"keyword.operator")||d(k,"entity.attribute-name")||d(k,"text")))}else{o=true}if(!k||!d(k,"meta.tag.name")||m.stepBackward().value.match("/")){return}var s=k.value;if(o){var s=s.substring(0,n.column-k.start)}return{text:"></"+s+">",selection:[1,1]}}});this.add("autoindent","insertion",function(j,m,o,p,q){if(q=="\n"){var r=o.getCursorPosition();var s=p.getLine(r.row);var l=s.substring(r.column,r.column+2);if(l=="</"){var n=this.$getIndent(s);var k=n+p.getTabString();return{text:"\n"+k+"\n"+n,selection:[1,k.length,1,k.length]}}}})};g.inherits(a,e);f.XmlBehaviour=a});