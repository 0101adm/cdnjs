define(function(b,a,c){var e=b("../lib/oop");var h=b("../lib/lang");var f=b("../worker/mirror").Mirror;var d=b("./css/csslint").CSSLint;var g=a.Worker=function(i){f.call(this,i);this.setTimeout(400);this.ruleset=null;this.setDisabledRules("ids");this.setInfoRules("adjoining-classes|qualified-headings|zero-units|gradients|import|outline-none")};e.inherits(g,f);(function(){this.setInfoRules=function(i){if(typeof i=="string"){i=i.split("|")}this.infoRules=h.arrayToMap(i);this.doc.getValue()&&this.deferredUpdate.schedule(100)};this.setDisabledRules=function(i){if(!i){this.ruleset=null}else{if(typeof i=="string"){i=i.split("|")}var j={};d.getRules().forEach(function(k){j[k.id]=true});i.forEach(function(k){delete j[k]});this.ruleset=j}this.doc.getValue()&&this.deferredUpdate.schedule(100)};this.onUpdate=function(){var k=this.doc.getValue();var j=this.infoRules;var i=d.verify(k,this.ruleset);this.sender.emit("csslint",i.messages.map(function(l){return{row:l.line-1,column:l.col-1,text:l.message,type:j[l.rule.id]?"info":l.type,rule:l.rule.name}}))}}).call(g.prototype)});