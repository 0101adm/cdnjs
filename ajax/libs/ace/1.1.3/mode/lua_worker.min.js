define(function(b,a,c){var e=b("../lib/oop");var f=b("../worker/mirror").Mirror;var d=b("../mode/lua/luaparse");var g=a.Worker=function(h){f.call(this,h);this.setTimeout(500)};e.inherits(g,f);(function(){this.onUpdate=function(){var h=this.doc.getValue();try{d.parse(h)}catch(i){if(i instanceof SyntaxError){this.sender.emit("error",{row:i.line-1,column:i.column,text:i.message,type:"error"})}return}this.sender.emit("ok")}}).call(g.prototype)});