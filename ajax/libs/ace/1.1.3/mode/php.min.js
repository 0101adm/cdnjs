define(function(f,h,c){var i=f("../lib/oop");var g=f("./text").Mode;var j=f("../tokenizer").Tokenizer;var e=f("./php_highlight_rules").PhpHighlightRules;var m=f("./php_highlight_rules").PhpLangHighlightRules;var l=f("./matching_brace_outdent").MatchingBraceOutdent;var d=f("../range").Range;var a=f("../worker/worker_client").WorkerClient;var n=f("./behaviour/cstyle").CstyleBehaviour;var o=f("./folding/cstyle").FoldMode;var b=f("../unicode");var k=function(p){this.inlinePhp=p&&p.inline;var q=this.inlinePhp?m:e;this.HighlightRules=q;this.$outdent=new l();this.$behaviour=new n();this.foldingRules=new o()};i.inherits(k,g);(function(){this.tokenRe=new RegExp("^["+b.packages.L+b.packages.Mn+b.packages.Mc+b.packages.Nd+b.packages.Pc+"_]+","g");this.nonTokenRe=new RegExp("^(?:[^"+b.packages.L+b.packages.Mn+b.packages.Mc+b.packages.Nd+b.packages.Pc+"_]|s])+","g");this.lineCommentStart=["//","#"];this.blockComment={start:"/*",end:"*/"};this.getNextLineIndent=function(v,r,t){var q=this.$getIndent(r);var u=this.getTokenizer().getLineTokens(r,v);var w=u.tokens;var p=u.state;if(w.length&&w[w.length-1].type=="comment"){return q}if(v=="php-start"){var s=r.match(/^.*[\{\(\[\:]\s*$/);if(s){q+=t}}else{if(v=="php-doc-start"){if(p!="php-doc-start"){return""}var s=r.match(/^\s*(\/?)\*/);if(s){if(s[1]){q+=" "}q+="* "}}}return q};this.checkOutdent=function(r,p,q){return this.$outdent.checkOutdent(p,q)};this.autoOutdent=function(p,q,r){this.$outdent.autoOutdent(q,r)};this.createWorker=function(p){var q=new a(["ace"],"ace/mode/php_worker","PhpWorker");q.attachToDocument(p.getDocument());if(this.inlinePhp){q.call("setOptions",[{inline:true}])}q.on("error",function(r){p.setAnnotations(r.data)});q.on("ok",function(){p.clearAnnotations()});return q};this.$id="ace/mode/php"}).call(k.prototype);h.Mode=k});