define(function(c,b,e){var f=c("../lib/oop");var a=c("./text_highlight_rules").TextHighlightRules;var d=function(){var k=("break|do|else|elseif|end|for|function|if|in|local|repeat|return|then|until|while|or|and|not");var n=("true|false|nil|_G|_VERSION");var i=("string|xpcall|package|tostring|print|os|unpack|require|getfenv|setmetatable|next|assert|tonumber|io|rawequal|collectgarbage|getmetatable|module|rawset|math|debug|pcall|table|newproxy|type|coroutine|_G|select|gcinfo|pairs|rawget|loadstring|ipairs|_VERSION|dofile|setfenv|load|error|loadfile|sub|upper|len|gfind|rep|find|match|char|dump|gmatch|reverse|byte|format|gsub|lower|preload|loadlib|loaded|loaders|cpath|config|path|seeall|exit|setlocale|date|getenv|difftime|remove|time|clock|tmpname|rename|execute|lines|write|close|flush|open|output|type|read|stderr|stdin|input|stdout|popen|tmpfile|log|max|acos|huge|ldexp|pi|cos|tanh|pow|deg|tan|cosh|sinh|random|randomseed|frexp|ceil|floor|rad|abs|sqrt|modf|asin|min|mod|fmod|log10|atan2|exp|sin|atan|getupvalue|debug|sethook|getmetatable|gethook|setmetatable|setlocal|traceback|setfenv|getinfo|setupvalue|getlocal|getregistry|getfenv|setn|insert|getn|foreachi|maxn|foreach|concat|sort|remove|resume|yield|status|wrap|create|running|__add|__sub|__mod|__unm|__concat|__lt|__index|__call|__gc|__metatable|__mul|__div|__pow|__len|__eq|__le|__newindex|__tostring|__mode|__tonumber");var o=("string|package|os|io|math|debug|table|coroutine");var t="";var q=("setn|foreach|foreachi|gcinfo|log10|maxn");var s=this.createKeywordMapper({keyword:k,"support.function":i,"invalid.deprecated":q,"constant.library":o,"constant.language":n,"invalid.illegal":t,"variable.language":"self"},"identifier");var m="(?:(?:[1-9]\\d*)|(?:0))";var h="(?:0[xX][\\dA-Fa-f]+)";var j="(?:"+m+"|"+h+")";var r="(?:\\.\\d+)";var g="(?:\\d+)";var l="(?:(?:"+g+"?"+r+")|(?:"+g+"\\.))";var p="(?:"+l+")";this.$rules={start:[{stateName:"bracketedComment",onMatch:function(w,v,u){u.unshift(this.next,w.length-2,v);return"comment"},regex:/\-\-\[=*\[/,next:[{onMatch:function(w,v,u){if(w.length==u[1]){u.shift();u.shift();this.next=u.shift()}else{this.next=""}return"comment"},regex:/\]=*\]/,next:"start"},{defaultToken:"comment"}]},{token:"comment",regex:"\\-\\-.*$"},{stateName:"bracketedString",onMatch:function(w,v,u){u.unshift(this.next,w.length,v);return"comment"},regex:/\[=*\[/,next:[{onMatch:function(w,v,u){if(w.length==u[1]){u.shift();u.shift();this.next=u.shift()}else{this.next=""}return"comment"},regex:/\]=*\]/,next:"start"},{defaultToken:"comment"}]},{token:"string",regex:'"(?:[^\\\\]|\\\\.)*?"'},{token:"string",regex:"'(?:[^\\\\]|\\\\.)*?'"},{token:"constant.numeric",regex:p},{token:"constant.numeric",regex:j+"\\b"},{token:s,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\/|%|\\#|\\^|~|<|>|<=|=>|==|~=|=|\\:|\\.\\.\\.|\\.\\."},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:"text",regex:"\\s+|\\w+"}]};this.normalizeRules()};f.inherits(d,a);b.LuaHighlightRules=d});