define(function(c,e,a){var g=c("../lib/oop");var d=c("./text").Mode;var h=c("./xquery/JSONiqLexer").JSONiqLexer;var b=c("../range").Range;var f=c("./behaviour/xquery").XQueryBehaviour;var j=c("./folding/cstyle").FoldMode;var i=function(){this.$tokenizer=new h();this.$behaviour=new f();this.foldingRules=new j()};g.inherits(i,d);(function(){this.getNextLineIndent=function(o,l,n){var k=this.$getIndent(l);var m=l.match(/\s*(?:then|else|return|[{\(]|<\w+>)\s*$/);if(m){k+=n}return k};this.checkOutdent=function(m,k,l){if(!/^\s+$/.test(k)){return false}return/^\s*[\}\)]/.test(l)};this.autoOutdent=function(p,q,r){var l=q.getLine(r);var m=l.match(/^(\s*[\}\)])/);if(!m){return 0}var n=m[1].length;var o=q.findMatchingBracket({row:r,column:n});if(!o||o.row==r){return 0}var k=this.$getIndent(q.getLine(o.row));q.replace(new b(r,0,r,n-1),k)};this.toggleCommentLines=function(k,p,q,l){var m,s;var o=true;var r=/^\s*\(:(.*):\)/;for(m=q;m<=l;m++){if(!r.test(p.getLine(m))){o=false;break}}var n=new b(0,0,0,0);for(m=q;m<=l;m++){s=p.getLine(m);n.start.row=m;n.end.row=m;n.end.column=s.length;p.replace(n,o?s.match(r)[1]:"(:"+s+":)")}};this.$id="ace/mode/jsoniq"}).call(i.prototype);e.Mode=i});