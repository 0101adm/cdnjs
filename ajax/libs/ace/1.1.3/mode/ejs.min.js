define(function(c,e,a){var h=c("../lib/oop");var d=c("./html_highlight_rules").HtmlHighlightRules;var g=c("./javascript_highlight_rules").JavaScriptHighlightRules;var m=function(p,n){d.call(this);if(!p){p="(?:<%|<\\?|{{)"}if(!n){n="(?:%>|\\?>|}})"}for(var o in this.$rules){this.$rules[o].unshift({token:"markup.list.meta.tag",regex:p+"(?![>}])[-=]?",push:"ejs-start"})}this.embedRules(g,"ejs-");this.$rules["ejs-start"].unshift({token:"markup.list.meta.tag",regex:"-?"+n,next:"pop"},{token:"comment",regex:"//.*?"+n,next:"pop"});this.$rules["ejs-no_regex"].unshift({token:"markup.list.meta.tag",regex:"-?"+n,next:"pop"},{token:"comment",regex:"//.*?"+n,next:"pop"});this.normalizeRules()};h.inherits(m,d);e.EjsHighlightRules=m;var h=c("../lib/oop");var i=c("../tokenizer").Tokenizer;var j=c("./html").Mode;var l=c("./javascript").Mode;var f=c("./css").Mode;var b=c("./ruby").Mode;var k=function(){j.call(this);this.HighlightRules=m;this.createModeDelegates({"js-":l,"css-":f,"ejs-":l})};h.inherits(k,j);(function(){this.$id="ace/mode/ejs"}).call(k.prototype);e.Mode=k});