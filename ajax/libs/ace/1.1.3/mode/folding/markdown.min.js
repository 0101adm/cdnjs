define(function(b,a,c){var d=b("../../lib/oop");var g=b("./fold_mode").FoldMode;var f=b("../../range").Range;var e=a.FoldMode=function(){};d.inherits(e,g);(function(){this.foldingStartMarker=/^(?:[=-]+\s*$|#{1,6} |`{3})/;this.getFoldWidget=function(j,i,k){var h=j.getLine(k);if(!this.foldingStartMarker.test(h)){return""}if(h[0]=="`"){if(j.bgTokenizer.getState(k)=="start"){return"end"}return"start"}return"start"};this.getFoldWidgetRange=function(p,k,u){var v=p.getLine(u);var j=v.length;var q=p.getLength();var s=u;var l=u;if(!v.match(this.foldingStartMarker)){return}if(v[0]=="`"){if(p.bgTokenizer.getState(u)!=="start"){while(++u<q){v=p.getLine(u);if(v[0]=="`"&v.substring(0,3)=="```"){break}}return new f(s,j,u,0)}else{while(u-->0){v=p.getLine(u);if(v[0]=="`"&v.substring(0,3)=="```"){break}}return new f(u,v.length,s,0)}}var i;function m(w){i=p.getTokens(w)[0];return i&&i.type.lastIndexOf(t,0)===0}var t="markup.heading";function o(){var w=i.value[0];if(w=="="){return 6}if(w=="-"){return 5}return 7-i.value.search(/[^#]/)}if(m(u)){var r=o();while(++u<q){if(!m(u)){continue}var h=o();if(h>=r){break}}l=u-(!i||["=","-"].indexOf(i.value[0])==-1?1:2);if(l>s){while(l>s&&/^\s*$/.test(p.getLine(l))){l--}}if(l>s){var n=p.getLine(l).length;return new f(s,j,l,n)}}}}).call(e.prototype)});