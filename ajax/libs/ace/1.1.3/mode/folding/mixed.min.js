define(function(b,a,c){var d=b("../../lib/oop");var f=b("./fold_mode").FoldMode;var e=a.FoldMode=function(g,h){this.defaultMode=g;this.subModes=h};d.inherits(e,f);(function(){this.$getMode=function(h){if(typeof h!="string"){h=h[0]}for(var g in this.subModes){if(h.indexOf(g)===0){return this.subModes[g]}}return null};this.$tryMode=function(g,i,h,k){var j=this.$getMode(g);return(j?j.getFoldWidget(i,h,k):"")};this.getFoldWidget=function(h,g,i){return(this.$tryMode(h.getState(i-1),h,g,i)||this.$tryMode(h.getState(i),h,g,i)||this.defaultMode.getFoldWidget(h,g,i))};this.getFoldWidgetRange=function(h,g,j){var i=this.$getMode(h.getState(j-1));if(!i||!i.getFoldWidget(h,g,j)){i=this.$getMode(h.getState(j))}if(!i||!i.getFoldWidget(h,g,j)){i=this.defaultMode}return i.getFoldWidgetRange(h,g,j)}}).call(e.prototype)});