if(typeof process!=="undefined"){require("amd-loader");require("./test/mockdom")}define(function(f,g,d){var a=f("./edit_session").EditSession;var i=f("./editor").Editor;var h=f("./test/mockrenderer").MockRenderer;var b=f("./test/assertions");var j=f("./mode/javascript").Mode;var e=f("./placeholder").PlaceHolder;var c=f("./undomanager").UndoManager;d.exports={"test: simple at the end appending of text":function(){var l=new a("var a = 10;\nconsole.log(a, a);",new j());var k=new i(new h(),l);new e(l,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);k.moveCursorTo(0,5);k.insert("b");b.equal(l.doc.getValue(),"var ab = 10;\nconsole.log(ab, ab);");k.insert("cd");b.equal(l.doc.getValue(),"var abcd = 10;\nconsole.log(abcd, abcd);");k.remove("left");k.remove("left");k.remove("left");b.equal(l.doc.getValue(),"var a = 10;\nconsole.log(a, a);")},"test: inserting text outside placeholder":function(){var l=new a("var a = 10;\nconsole.log(a, a);\n",new j());var k=new i(new h(),l);new e(l,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);k.moveCursorTo(2,0);k.insert("b");b.equal(l.doc.getValue(),"var a = 10;\nconsole.log(a, a);\nb")},"test: insertion at the beginning":function(l){var n=new a("var a = 10;\nconsole.log(a, a);",new j());var k=new i(new h(),n);var m=new e(n,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);k.moveCursorTo(0,4);k.insert("$");b.equal(n.doc.getValue(),"var $a = 10;\nconsole.log($a, $a);");k.moveCursorTo(0,4);setTimeout(function(){k.insert("v");b.equal(n.doc.getValue(),"var v$a = 10;\nconsole.log(v$a, v$a);");l()},10)},"test: detaching placeholder":function(){var m=new a("var a = 10;\nconsole.log(a, a);",new j());var k=new i(new h(),m);var l=new e(m,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);k.moveCursorTo(0,5);k.insert("b");b.equal(m.doc.getValue(),"var ab = 10;\nconsole.log(ab, ab);");l.detach();k.insert("cd");b.equal(m.doc.getValue(),"var abcd = 10;\nconsole.log(ab, ab);")},"test: events":function(){var o=new a("var a = 10;\nconsole.log(a, a);",new j());var k=new i(new h(),o);var n=new e(o,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);var l=false;var m=false;n.on("cursorEnter",function(){l=true});n.on("cursorLeave",function(){m=true});k.moveCursorTo(0,0);k.moveCursorTo(0,4);n.onCursorChange();b.ok(l);k.moveCursorTo(1,0);n.onCursorChange();b.ok(m)},"test: cancel":function(l){var n=new a("var a = 10;\nconsole.log(a, a);",new j());n.setUndoManager(new c());var k=new i(new h(),n);var m=new e(n,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);k.moveCursorTo(0,5);k.insert("b");k.insert("cd");k.remove("left");b.equal(n.doc.getValue(),"var abc = 10;\nconsole.log(abc, abc);");setTimeout(function(){m.cancel();b.equal(n.doc.getValue(),"var a = 10;\nconsole.log(a, a);");l()},80)}}});if(typeof module!=="undefined"&&module===require.main){require("asyncjs").test.testcase(module.exports).exec()};