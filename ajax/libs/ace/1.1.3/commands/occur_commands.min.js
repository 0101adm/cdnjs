define(function(d,f,b){var c=d("../config"),a=d("../occur").Occur;var j={name:"occur",exec:function(m,l){var n=!!m.session.$occur;var k=new a().enter(m,l);if(k&&!n){i.installIn(m)}},readOnly:true};var e=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(l){var k=l.session.$occur;if(!k){return}k.exit(l,{});if(!l.session.$occur){i.uninstallFrom(l)}},readOnly:true},{name:"occuraccept",bindKey:"enter",exec:function(l){var k=l.session.$occur;if(!k){return}k.exit(l,{translatePosition:true});if(!l.session.$occur){i.uninstallFrom(l)}},readOnly:true}];var g=d("../keyboard/hash_handler").HashHandler;var h=d("../lib/oop");function i(){}h.inherits(i,g);(function(){this.isOccurHandler=true;this.attach=function(l){g.call(this,e,l.commands.platform);this.$editor=l};var k=this.handleKeyboard;this.handleKeyboard=function(o,m,l,p){var n=k.call(this,o,m,l,p);return(n&&n.command)?n:undefined}}).call(i.prototype);i.installIn=function(l){var k=new this();l.keyBinding.addKeyboardHandler(k);l.commands.addCommands(e)};i.uninstallFrom=function(l){l.commands.removeCommands(e);var k=l.getKeyboardHandler();if(k.isOccurHandler){l.keyBinding.removeKeyboardHandler(k)}};f.occurStartCommand=j});