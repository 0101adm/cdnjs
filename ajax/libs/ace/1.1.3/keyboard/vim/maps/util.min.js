define(function(c,b,d){var a=c("../registers");var e=c("../../../lib/dom");e.importCssString(".insert-mode .ace_cursor{    border-left: 2px solid #333333;}.ace_dark.insert-mode .ace_cursor{    border-left: 2px solid #eeeeee;}.normal-mode .ace_cursor{    border: 0!important;    background-color: red;    opacity: 0.5;}","vimMode");d.exports={onVisualMode:false,onVisualLineMode:false,currentMode:"normal",noMode:function(f){f.unsetStyle("insert-mode");f.unsetStyle("normal-mode");if(f.commands.recording){f.commands.toggleRecording(f)}f.setOverwrite(false)},insertMode:function(f){this.currentMode="insert";f.setStyle("insert-mode");f.unsetStyle("normal-mode");f.setOverwrite(false);f.keyBinding.$data.buffer="";f.keyBinding.$data.state="insertMode";this.onVisualMode=false;this.onVisualLineMode=false;if(this.onInsertReplaySequence){f.commands.macro=this.onInsertReplaySequence;f.commands.replay(f);this.onInsertReplaySequence=null;this.normalMode(f)}else{f._emit("changeStatus");if(!f.commands.recording){f.commands.toggleRecording(f)}}},normalMode:function(f){this.currentMode="normal";f.unsetStyle("insert-mode");f.setStyle("normal-mode");f.clearSelection();var g;if(!f.getOverwrite()){g=f.getCursorPosition();if(g.column>0){f.navigateLeft()}}f.setOverwrite(true);f.keyBinding.$data.buffer="";f.keyBinding.$data.state="start";this.onVisualMode=false;this.onVisualLineMode=false;f._emit("changeStatus");if(f.commands.recording){f.commands.toggleRecording(f);return f.commands.macro}else{return[]}},visualMode:function(g,f){if((this.onVisualLineMode&&f)||(this.onVisualMode&&!f)){this.normalMode(g);return}g.setStyle("insert-mode");g.unsetStyle("normal-mode");g._emit("changeStatus");if(f){this.onVisualLineMode=true}else{this.onVisualMode=true;this.onVisualLineMode=false}},getRightNthChar:function(h,j,g,k){var f=h.getSession().getLine(j.row);var i=f.substr(j.column+1).split(g);return k<i.length?i.slice(0,k).join(g).length:null},getLeftNthChar:function(h,j,g,k){var f=h.getSession().getLine(j.row);var i=f.substr(0,j.column).split(g);return k<i.length?i.slice(-1*k).join(g).length:null},toRealChar:function(f){if(f.length===1){return f}if(/^shift-./.test(f)){return f[f.length-1].toUpperCase()}else{return""}},copyLine:function(f){var g=f.getCursorPosition();f.selection.moveTo(g.row,g.column);f.selection.selectLine();a._default.isLine=true;a._default.text=f.getCopyText().replace(/\n$/,"");f.selection.moveTo(g.row,g.column)}}});